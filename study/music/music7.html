<html>
<head>

<script src="lib/kick.js"></script>
<script src="lib/note.js"></script>
<script src="lib/piano.js"></script>
<script src="lib/piano2.js"></script>

<script src="music7.js"></script>
<script>
	/*
	var context = new AudioContext();
	var now = context.currentTime;
	now++;
	
	var measureLength = 6 * 40 / 60;
	var pulses  = [1, 2, 3, 4, 6, 8];
	var pulsesP = [8, 6, 4, 3, 2, 1];
	var s = new Song (context, measureLength, pulses, pulsesP);
	s.play (now, Math.floor (Math.random () * Number.MAX_SAFE_INTEGER));
	*/

try {	
	var context = new AudioContext();
	var now = context.currentTime;
	now++;

	var bf       = 432;
	var scale    = [
		1/1, 16/15, 9/8, 6/5, 5/4, 4/3, 7/5, 3/2,	8/5, 5/3, 16/9, 15/8];
	var octaves  = 1;
	var octave   = 0;
	var gain     = .1;
	var richness = 5;
	var piano    = new Piano2 (
		context, bf, scale, octaves, octave, gain, richness);

	var cnt;
	var t = 1;
	for (cnt = 1; cnt <= 4; cnt++) {
		var chordI = [0, 4, 7];
		piano.trigger (now, chordI, t);
		now += t;
		
		var chordIV = [5, 9, 12];
		piano.trigger (now, chordIV, t);
		now += t;
		
		chordV = [7, 11, 14];
		piano.trigger (now, chordV, t);
		now += t;
	}
} catch (e) { alert (e) }
</script>

</head>
</html>
