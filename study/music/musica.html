<html>
<head>
	
<script src="music4.js"></script>
<script>
	var context = new AudioContext();
	var now = context.currentTime;
	now++;
	
	var measureLength1 = 3 * 60 / 40;
	var measureLength2 = 4 * 60 / 40;
	var pulses1  = [1, 1, 1];
	var pulsesP1 = [1, 1, 1];
	var pulses2  = [1, 1, 1];
	var pulsesP2 = [1, 1, 1];
	var s1 = new Song1 (context, measureLength1, pulses1, pulsesP1);
	var s2 = new Song2 (context, measureLength2, pulses2, pulsesP2);
	var I = Math.floor (Math.random () * Number.MAX_SAFE_INTEGER);
	
	function cycle () {
		s1.play (now + measureLength1 * 0, I);
		s2.play (now + measureLength2 * 0, I);
		
		s1.play (now + measureLength1 * 1, I);
		s2.play (now + measureLength2 * 1, I);
		
		s1.play (now + measureLength1 * 2, I);
		s2.play (now + measureLength2 * 2, I);
		
		s1.play (now + measureLength1 * 3, I);
		
		now += measureLength1 * measureLength2;
	
		setTimeout(cycle, Math.max (0, (now - context.currentTime) * 1000 - 100));
	}
	cycle ();
</script>

</head>
</html>
