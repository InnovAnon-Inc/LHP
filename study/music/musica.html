<html>
<head>

<script src="musiclib.js"></script>
<script src="music4.js"></script>
<script>
try {
	var context = new AudioContext();
	var now = context.currentTime;
	now++;
	
	var den = 1;
	var tempo = 60 / 40;
	var measureLength1 = 3 / den * tempo;
	var measureLength2 = 4 / den * tempo;
	//var pulses1  = [1, 3, 1, 2];
	//var pulsesP1 = [2, 2, 3, 3];
	//var pulses2  = [2, 1, 3, 1];
	//var pulsesP2 = [3, 3, 2, 2];
	var pulses1  = [1, 3, 2];
	var pulsesP1 = [2, 1, 3]
	var pulses2  = [3, 2, 1];
	var pulsesP2 = [2, 1, 3]
	var s1 = new SongA (context, measureLength1, pulses1, pulsesP1);
	var s2 = new Song2 (context, measureLength2, pulses2, pulsesP2);
	var I1 = Math.floor (Math.random () * Number.MAX_SAFE_INTEGER);
	var I2 = I1;
	
	function cycle () {
		s1.play (now + measureLength1 * 0, I1++);
		s2.play (now + measureLength2 * 0, I2++);
		
		s1.play (now + measureLength1 * 1, I1++);
		s2.play (now + measureLength2 * 1, I2++);
		
		s1.play (now + measureLength1 * 2, I1++);
		s2.play (now + measureLength2 * 2, I2++);
		
		s1.play (now + measureLength1 * 3, I1++);
		
		now += 12 / den * tempo;
	
		setTimeout(cycle, Math.max (0, (now - context.currentTime) * 1000 - 100));
	}
	cycle ();
} catch (e) { alert (e) }
</script>

</head>
</html>
